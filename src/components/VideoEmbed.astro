---
interface Props {
  lang: 'fa' | 'en';
  aparatId?: string;
  youtubeId?: string;
}

const { lang, aparatId, youtubeId } = Astro.props;
const isFa = lang === 'fa';
const placeholder = !aparatId && !youtubeId;
---

<section class="mix-section mix-section--tight">
  <div class="mix-container">
    {placeholder ? (
      <div class="mix-card">
        <div class="mix-card__media">
          <img
            src="/media/factory/placeholder.jpg"
            alt={isFa ? 'کارخانه میکس‌پلاس' : 'MixPlus factory'}
            loading="lazy"
          />
        </div>
        <div class="mix-card__body">
          <p>
            {isFa
              ? 'به‌زودی ویدیوی معرفی کارخانه میکس‌پلاس در این بخش قرار می‌گیرد.'
              : 'Factory introduction video will be available here soon.'}
          </p>
        </div>
      </div>
    ) : (
      <div
        style="
          position:relative;
          padding-bottom:56.25%;
          height:0;
          overflow:hidden;
          border-radius:24px;
          border:1px solid var(--stroke);
        "
      >
        {isFa ? (
          <iframe
            src={`https://www.aparat.com/video/video/embed/videohash/${aparatId}/vt/frame`}
            style="position:absolute;top:0;left:0;width:100%;height:100%;"
            frameborder="0"
            allowfullscreen
          ></iframe>
        ) : (
          <iframe
            src={`https://www.youtube.com/embed/${youtubeId}`}
            title="MixPlus factory"
            style="position:absolute;top:0;left:0;width:100%;height:100%;"
            frameborder="0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
            allowfullscreen
          ></iframe>
        )}
      </div>
    )}
  </div>
</section>
